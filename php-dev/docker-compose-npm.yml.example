nginx:
    image: ibbd/nginx
    container_name: ibbd-nginx
    ports:
        - 80:80
    links:
        - php-fpm
    volumes:
        - /var/www:/var/www
        - /var/log/nginx:/var/log/nginx 
        - /etc/nginx/nginx-conf-v2/products/sites-enabled:/etc/nginx/sites-enabled:ro
        - /etc/nginx/nginx-conf-v2/products/nginx.conf:/etc/nginx/nginx.conf:ro
    volumes_from:
        - php-fpm

php-fpm:
    image: ibbd/php-fpm
    container_name: ibbd-php-fpm
    command: php-fpm -c /usr/local/etc/php/php.ini -y /usr/local/etc/php-fpm.conf
    ports:
        - 9000:9000
    links:
        - mysql
    volumes:
        - /var/www:/var/www
        - /var/log/php:/var/log/php
        - ./config/php.ini:/usr/local/etc/php/php.ini:ro 
        - ./config/php-fpm.conf:/usr/local/etc/php-fpm.conf:ro 

mysql:
    image: ibbd/mariadb
    container_name: ibbd-mariadb
    environment: 
        - MYSQL_ROOT_PASSWORD=111111
    ports:
        - 3306:3306
    volumes:
        - /data/mysql:/var/lib/mysql
        - /var/log/mysql:/var/log/mysql
        - ./config/my.cnf:/etc/mysql/my.cnf:ro 

